<!DOCTYPE HTML>
<html>

<head>
    <title>自研容器</title>
    <link rel="stylesheet" href="style.css">
    <meta charset="UTF-8">
</head>
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
<meta>
<body style="background-color: #7dc3c9;">
<div style="padding:0px;">
    <h2 style="font-sise:20px">此处是通过自研容器打开的</h2>
    <p>联系我们:<a href="tel://13333333333">13333333333</a> </p>
    <hr />
    <div style="width:200px;height:50px;background-color:red" id="textBtn">测试
    </div>
    <hr />
    <div style="width:200px;height:50px;background-color:red" id="snapshot1">截取全屏
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="snapshot2">截取h5页面
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="snapshot3">截取当前页面上的h5页面
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="addNotifyListener">添加通知
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="removeNotifyListener">移除通知
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="postNotification">分发消息
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="alert">警告框
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="confirm">确认框
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="toast">显示弱提示
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="hideToast">隐藏弱提示
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="actionSheet">选择列表组件
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="setTitle">设置标题
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="setTitleColor">设置标题颜色组件
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="setBarBottomLineColor">设置导航栏分割线颜色
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="showOptionMenu">显示标题右侧按钮
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="setOptionMenu1">设置标题右侧按钮样式一
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="setOptionMenu2">设置标题右侧按钮样式二
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="setOptionMenu3">设置标题右侧按钮样式三
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="setOptionMenu4">设置标题右侧按钮样式四
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="setOptionMenu5">设置标题右侧按钮样式五
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="hideOptionMenu">隐藏标题右侧按钮
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="setBackTitle">设置后退按钮标题
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="hideBackMenu">隐藏后退按钮
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="hideNavBar">隐藏导航栏
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="showLoading">显示加载中
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="hideLoading">隐藏加载中
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="showTitleLoading">显示标题加载中
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="hideTitleLoading">隐藏标题加载中
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="setAPDataStorage">设置AP数据
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="getAPDataStorage">获取AP数据
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="removeAPDataStorage">移除AP数据
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="getStartupParams">获取容器的启动参数
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="error">错误信息管理
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="test">特殊字符处理
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="testssl">测试国密请求
    </div>
    <hr/>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="umGenerateSign">测试多媒体鉴权
    </div>
    <hr/>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="testssl2">测试code和msg与ios端一致
    </div>
    <hr/>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="umjsregister">测试js注入
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="pushWindow">打开新页面
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="popWindow">关闭当前页
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="popTo">关闭多页
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="startApp">打开新应用
    </div>
    <hr/>
    <div style="width:200px;height:50px;background-color:red" id="exitApp">关闭当前应用
    </div>
    <hr/>
    <p>
        <input type="text" id="text1" value="用户名(username)" />
    </p>
</div>

    <script type="text/javascript">
        document.addEventListener("AlipayJSBridgeReady", function (event) {
            //alert(JSON.stringify(AlipayJSBridge.startupParams));
            console.log('AlipayJSBridgeReady');
        });
        //页面恢复运行
        document.addEventListener("resume",function(event){
           //alert(JSON.stringify(event.data));
           console.log('resume'+JSON.stringify(event.data));
        })
        //页面压后台
        document.addEventListener("pause",function(event){
           //alert(JSON.stringify(event.data));
           console.log('pause'+JSON.stringify(event.data));
        })
        //点击标题栏
        document.addEventListener("titleClick",function(event){
            alert('titleClick');
        })
        //点击副标题栏
        document.addEventListener("subtitleClick",function(event){
            alert('subtitleClick');
        })
        //点击右上角按钮
        document.addEventListener("optionMenu",function(event){
            alert('optionMenu'+JSON.stringify(event));
        })
        //回退
        document.addEventListener("back",function(event){
           // event.preventDefault();
            //console.log('back');
            //confirm("请选择 确定 & 取消");
            //alert('uu');
        })


        document.getElementById("textBtn").addEventListener("click",function(){
            window.UMJSBridge && window.UMJSBridge.callHandler('get_deviceInfo',{
                infoType:"appversion高光轩"
            },(res)=>{
                console.log(res,"appversion===高光轩");
                if(res.result && res.result.appversion){
                    this.appversion = res.result.appversion;
                }
            });
        })
        document.getElementById("snapshot1").addEventListener("click",function(){
            window.UMJSBridge.callHandler("snapshot",{range:"screen",dataType:'dataURL',imageFormat:'png'},function(result) {
                alert(JSON.stringify(result));
                });
        })
        document.getElementById("snapshot3").addEventListener("click",function(){
            window.UMJSBridge.callHandler("snapshot",{range:"viewport",dataType:'fileURL',imageFormat:'jpg'},function(result) {
                alert(JSON.stringify(result));
                });
        })
        document.getElementById("snapshot2").addEventListener("click",function(){
            window.UMJSBridge.callHandler("snapshot",{range:"document",dataType:'fileURL',imageFormat:'jpg'},function(result) {
                alert(JSON.stringify(result));
                });
        })
        document.getElementById("addNotifyListener").addEventListener("click",function(){
            window.UMJSBridge.callHandler("addNotifyListener",{name:'UMNEBULANOTIFY_TEST_EVENT'},function(result) {
                alert("收到的消息："+ JSON.stringify(result));
                });
        })
        document.getElementById("removeNotifyListener").addEventListener("click",function(){
            window.UMJSBridge.callHandler("removeNotifyListener",{name:'UMNEBULANOTIFY_TEST_EVENT'},function(result) {
                alert(JSON.stringify(result));
                });
        })
        document.getElementById("postNotification").addEventListener("click",function(){
            window.UMJSBridge.callHandler("postNotification",{name:'TEST_EVENT',data:{hello:'hello'}},function(result) {
                    alert(JSON.stringify(result));
                });
        })
        document.getElementById("alert").addEventListener("click",function(){
            window.UMJSBridge.callHandler("alert",{title:"警告",message:'警告信息',button:'确定'},function(result) {
            console.log('alert-res'+JSON.stringify(result));
                alert(JSON.stringify(result));
                });
        })
        document.getElementById("confirm").addEventListener("click",function(){
            window.UMJSBridge.callHandler("confirm",{title:"亲",message:'是真的退出吗',okButton:'是',cancelButton:'否'},function(result) {
                alert(JSON.stringify(result));
                });
        })
        document.getElementById("toast").addEventListener("click",function(){
            window.UMJSBridge.callHandler("toast",{duration:5000,type:1},function(result) {
                });
        })
        document.getElementById("hideToast").addEventListener("click",function(){
            window.UMJSBridge.callHandler("hideToast",function(result) {
                });
        })
        document.getElementById("actionSheet").addEventListener("click",function(){
            window.UMJSBridge.callHandler("actionSheet",{title:"亲",btns:['第一个按钮','第二个按钮','第三个按钮'],cancelBtn:'否',destructiveBtnIndex:3},function(result) {
                alert(JSON.stringify(result));
                });
        })
        //设置标题
        document.getElementById("setTitle").addEventListener("click",function(){
            window.UMJSBridge.callHandler("setTitle",{title: '新标题中间1中间2中间3中间4中间5中间结尾',subtitle:'副标题'},function(result) {

            });
        })
        //设置导航栏背景色
        document.getElementById("setTitleColor").addEventListener("click",function(){
            window.UMJSBridge.callHandler("setTitleColor",{color: 16750899},function(result) {

            });
        })
        //设置导航栏底部细线颜色
        document.getElementById("setBarBottomLineColor").addEventListener("click",function(){
            window.UMJSBridge.callHandler("setBarBottomLineColor",{color: 16711680},function(result) {
                    alert(JSON.stringify(result));
            });
        })
        //显示右上角按钮
        document.getElementById("showOptionMenu").addEventListener("click",function(){
            window.UMJSBridge.callHandler("showOptionMenu",function(result) {

            });
        })
        //设置右上角按钮样式一
        document.getElementById("setOptionMenu1").addEventListener("click",function(){
            window.UMJSBridge.callHandler("setOptionMenu",{reset:true,title:'hello'},function(result) {
                });
        })
        //设置右上角按钮样式二
        document.getElementById("setOptionMenu2").addEventListener("click",function(){
            window.UMJSBridge.callHandler("setOptionMenu",{title:'按钮',redDot:"6"},function(result) {

            });
        })
         //设置右上角按钮样式三
        document.getElementById("setOptionMenu3").addEventListener("click",function(){
            window.UMJSBridge.callHandler("setOptionMenu",{icontype:'user',redDot:"0"},function(result) {
                });
        })
        //设置右上角按钮样式四
        document.getElementById("setOptionMenu4").addEventListener("click",function(){
            window.UMJSBridge.callHandler("setOptionMenu",{icon:'https://pic.616pic.com/ys_b_img/00/03/62/z632bbpkr7.jpg',redDot:"66"},function(result) {
                });
        })
        //设置右上角按钮样式五
<!--        document.getElementById("setOptionMenu5").addEventListener("click",function(){-->
<!--            window.UMJSBridge.callHandler("setOptionMenu",{// 显示时的顺序为从右至左-->
<!--                menus: [{-->
<!--                  title: '收藏',-->
<!--                  redDot: '-1', // -1 表示不显示，0 表示显示红点，1-99 表示在红点上显示的数字-->
<!--                }, {-->
<!--                  title: '添加',-->
<!--                  redDot: '0', // -1 表示不显示，0 表示显示红点，1-99 表示在红点上显示的数字-->
<!--                }],-->
<!--                override: true // 在需要设置多个 option 的情况下，是否保留默认的 optionMenu-->

<!--            },function(result) {-->
<!--                });-->
<!--        })-->
        document.getElementById("setOptionMenu5").addEventListener("click",function(){
            window.UMJSBridge.callHandler("setOptionMenu",{// 显示时的顺序为从右至左
                menus: [{
                  icontype: 'scan',
                  redDot: '0', // -1 表示不显示，0 表示显示红点，1-99 表示在红点上显示的数字
                }, {
                  icontype: 'user',
                  redDot: '5', // -1 表示不显示，0 表示显示红点，1-99 表示在红点上显示的数字
                }],
                override: true // 在需要设置多个 option 的情况下，是否保留默认的 optionMenu

            },function(result) {
                });
        })
        //隐藏右上角按钮
        document.getElementById("hideOptionMenu").addEventListener("click",function(){
            window.UMJSBridge.callHandler("hideOptionMenu",function(result) {

            });
        })
        //设置后退按钮标题
        document.getElementById("setBackTitle").addEventListener("click",function(){
            window.UMJSBridge.callHandler("abcSetBackButtonTitle",{backTitle:'标题1'},function(result) {

            });
        })
        //隐藏后退按钮
        document.getElementById("hideBackMenu").addEventListener("click",function(){
            window.UMJSBridge.callHandler("abcSetNavigationLeftBarItemHidden",{hide:true},function(result) {

            });
        })
        //隐藏导航栏
        document.getElementById("hideNavBar").addEventListener("click",function(){
            window.UMJSBridge.callHandler("hideTitlebar",{hide:true},function(result) {

            });
        })

        document.getElementById("showLoading").addEventListener("click",function(){
            window.UMJSBridge.callHandler("showLoading",{text: '新的loading',delay:6000
            },function(result) {

            });

        })
        document.getElementById("hideLoading").addEventListener("click",function(){
            window.UMJSBridge.callHandler("hideLoading",function(result) {

            });
        })
        document.getElementById("showTitleLoading").addEventListener("click",function(){
            window.UMJSBridge.callHandler("showTitleLoading",function(result) {

            });
        })
        document.getElementById("hideTitleLoading").addEventListener("click",function(){
            window.UMJSBridge.callHandler("hideTitleLoading",function(result) {

            });
        })
        document.getElementById("setAPDataStorage").addEventListener("click",function(){
            window.UMJSBridge.callHandler("setAPDataStorage",{value:"UMAP存储的值",key:'setKey',business:'umap'},function(result) {
                alert(JSON.stringify(result));
                });
        })
        document.getElementById("getAPDataStorage").addEventListener("click",function(){
            window.UMJSBridge.callHandler("getAPDataStorage",{key:'setKey',business:'umap'},function(result) {
                alert(JSON.stringify(result));
                });
        })
        document.getElementById("removeAPDataStorage").addEventListener("click",function(){
            window.UMJSBridge.callHandler("removeAPDataStorage",{key:'setKey',business:'umap'},function(result) {
                alert(JSON.stringify(result));
                });
        })
        document.getElementById("getStartupParams").addEventListener("click",function(){
            window.UMJSBridge.callHandler("getStartupParams",{key:['title','ee','tt']},function(result) {
                alert(JSON.stringify(result));
                });
               //alert(JSON.stringify(AlipayJSBridge.startupParams));
        })
        document.getElementById("error").addEventListener("click",function(){
            window.UMJSBridge.callHandler("error",function(result) {
                alert(JSON.stringify(result));
                });
        })
        document.getElementById("test").addEventListener("click",function(){
            window.UMJSBridge.callHandler("test",function(result) {
                console.log('test-res'+JSON.stringify(result));
                alert(JSON.stringify(result));
                });
        })
        document.getElementById("testssl").addEventListener("click",function(){
            window.UMJSBridge.callHandler("umRPC",
            {'configFileName':'umap_rpc_config_qyzy.json','operationType': 'base.crypt.getSm4KeyIvNoSession','path': '/CMB/','reqJson': '{}','headers':{'inter':'orgin'},'GMSSL': '1','channel': 'testSSL'},
            function(result) {
                console.log('umRPC-res'+JSON.stringify(result));

                });
        })
        document.getElementById("umGenerateSign").addEventListener("click",function(){
            window.UMJSBridge.callHandler("umGenerateSign",function(result) {
                alert(JSON.stringify(result));
                });
        })
        document.getElementById("testssl2").addEventListener("click",function(){
            window.UMJSBridge.callHandler("umRPC",
            {'operationType': 'com.abchina.mgsapp.testok','path': '/MgsApp/','reqJson': '{}','GMSSL': '1','channel': 'testSSL'},
            function(result) {

                alert(JSON.stringify(result));
                });
        })
        document.getElementById("umjsregister").addEventListener("click",function(){
             alert(window.UMJSBridgeNew);
        })
        document.getElementById("pushWindow").addEventListener("click",function(){
            window.UMJSBridge.callHandler("pushWindow",
            {'appId': '23040300','path': '/MDS_01/MDS/','modelAppId': '7024481523271680000'},function(result) {
                console.log('test-res:'+result);

                });
        })
        document.getElementById("popWindow").addEventListener("click",function(){
            window.UMJSBridge.callHandler("popWindow",
            {'data': {'from': '/MDS_01/MDS/','info': '7024481523271680000'}},function(result) {
                console.log('test-res:'+result);

                });
        })
        document.getElementById("popTo").addEventListener("click",function(){
            window.UMJSBridge.callHandler("popTo",

            //{urlPattern: 'baidu','data': {'from': '/MDS_01/MDS/','info': '7024481523271680000'}},function(result) {
            {index: -3,'data': {'from': '/MDS_01/MDS/','info': '7024481523271680000'}},function(result) {
                console.log('test-res:'+result);

                });
        })
        document.getElementById("startApp").addEventListener("click",function(){
            window.UMJSBridge.callHandler("startApp",
            {'appId': '31009112','closeCurrentApp':true,param:{'aaa':'bbb','backBehavior':'oto','closeCurrentApp':true}},function(result) {
                console.log('test-res:'+result);

                });
        })
        document.getElementById("exitApp").addEventListener("click",function(){
            window.UMJSBridge.callHandler("exitApp",
            {'appId': '23040300','path': '/MDS_01/MDS/','modelAppId': '7024481523271680000'},function(result) {
                console.log('test-res:'+result);

                });
        })

    </script>
    <script src="https://s.url.cn/qqun/qun/qqweb/m/qun/confession/js/vconsole.min.js "></script>
</body>

</html>
